<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Application Pentagon Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-section {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }
        
        .form-section:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.1);
        }
        
        .section-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .help-text {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .level-note {
            color: #888;
            font-size: 0.85em;
            font-style: italic;
            margin-bottom: 8px;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            margin-bottom: 10px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .input-with-feedback {
            position: relative;
        }
        
        .score-bar {
            height: 12px;
            background: #f0f0f0;
            border-radius: 6px;
            margin-bottom: 8px;
            position: relative;
            border: 1px solid #ddd;
            overflow: hidden;
        }
        
        .score-fill {
            height: 100%;
            width: 0%;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .score-indicator {
            position: absolute;
            top: -2px;
            width: 3px;
            height: 16px;
            background: #333;
            border-radius: 2px;
            transition: left 0.3s ease;
            left: 0%;
        }
        
        .current-level {
            font-size: 0.9em;
            font-weight: bold;
            color: #667eea;
            margin-top: 5px;
            min-height: 20px;
        }
        
        .language-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .language-selector select {
            flex: 1;
            min-width: 150px;
            margin-bottom: 0;
        }
        
        .language-selector input {
            flex: 1;
            min-width: 100px;
            margin-bottom: 0;
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .results {
            margin-top: 40px;
            text-align: center;
            display: none;
        }
        
        .pentagon-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 30px auto;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            text-align: left;
        }
        
        .stat-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-value {
            color: #667eea;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .rating {
            font-size: 1.5em;
            font-weight: bold;
            color: #764ba2;
            margin: 20px 0;
        }
        
        .optional {
            color: #999;
            font-size: 0.9em;
        }
        
        .extracurricular-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .extracurricular-grid {
                grid-template-columns: 1fr;
            }
            .pentagon-container {
                width: 300px;
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>College Application Pentagon Analysis System</h1>
        
        <form id="scoringForm">
            <div class="form-section">
                <div class="input-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" id="studentName" name="studentName" placeholder="Enter your name" required>
                </div>
            </div>

            <!-- Standardized Test Score -->
            <div class="form-section">
                <div class="section-title">1. Standardized Test Score Academic</div>
                <div class="level-note">1-6: Normal student level, 6+: Exceptionally rare, determining factor for college consideration</div>
                
                <div class="input-group">
                    <label for="languageTest">Language Test <span class="optional">(Optional if American)</span>:</label>
                    <div class="help-text">
                        <strong>TOEFL iBT:</strong> 0-74(0) 75-89(1) 90-99(2) 100-104(3) 105-109(4) 110-114(5) 115-119(6) 120+(6.5)<br>
                        <strong>IELTS:</strong> 0-5.0(0) 5.5-6.0(1) 6.0-6.5(2) 6.5-7.0(3) 7.0-7.5(4) 7.5-8.0(5) 8.0-8.5(6) 9.0(6.5)<br>
                        <strong>DET:</strong> 0-84(0) 85-99(1) 100-114(2) 115-124(3) 125-134(4) 135-144(5) 145-154(6) 155+(6.5)<br>
                        <strong>TOEFL Essentials:</strong> 0-5(0) 6-7(1) 7-8(2) 8-9(3) 9-10(4) 10-11(5) 11-12(6) 12+(6.5)
                    </div>
                    <div class="language-selector">
                        <select id="languageTestType">
                            <option value="">Select Test Type</option>
                            <option value="toefl">TOEFL iBT</option>
                            <option value="ielts">IELTS</option>
                            <option value="det">Duolingo English Test</option>
                            <option value="toefl-essentials">TOEFL Essentials</option>
                        </select>
                        <input type="number" id="languageScore" placeholder="Score" min="0">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="satScore">SAT Score <span class="optional">(Optional)</span>:</label>
                    <div class="help-text">
                        <strong>SAT:</strong> 400-1199(0) 1200-1349(1) 1350-1399(2) 1400-1449(3) 1450-1499(4) 1500-1549(5) 1550-1599(6) 1600(6.5)
                    </div>
                    <div class="input-with-feedback">
                        <input type="number" id="satScore" placeholder="SAT Score (400-1600)" min="400" max="1600" oninput="updateScoreBar(this, 'sat')">
                        <div class="score-bar">
                            <div class="score-fill" id="satFill"></div>
                            <div class="score-indicator" id="satIndicator"></div>
                        </div>
                        <div class="current-level" id="satLevel"></div>
                    </div>
                </div>
            </div>

            <!-- Academic -->
            <div class="form-section">
                <div class="section-title">2. Academic Performance</div>
                <div class="level-note">1-6: Normal student level, 6+: Exceptionally rare, determining factor for college consideration</div>
                
                <div class="input-group">
                    <label for="apScore">AP Scores:</label>
                    <div class="help-text">
                        <strong>AP 5s Count:</strong> Number of AP exams with score 5<br>
                        0 AP 5s(0) | 1 AP 5(1) | 2 AP 5s(2) | 3 AP 5s(3) | 4 AP 5s(4) | 5 AP 5s(5) | 10 AP 5s(6) | 15 AP 5s(6.5) | 20+ AP 5s(7)
                    </div>
                    <div class="input-with-feedback">
                        <input type="number" id="apScore" placeholder="Number of AP 5s" min="0" oninput="updateScoreBar(this, 'ap')">
                        <div class="score-bar">
                            <div class="score-fill" id="apFill"></div>
                            <div class="score-indicator" id="apIndicator"></div>
                        </div>
                        <div class="current-level" id="apLevel"></div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gpaType">Academic System:</label>
                    <select id="gpaType">
                        <option value="gpa4.0">US GPA (4.0 Scale)</option>
                        <option value="gpa4.33">US GPA (4.33 Scale)</option>
                        <option value="gpa5.0">US GPA (5.0 Scale)</option>
                        <option value="gpa100">Percentage (100 Scale)</option>
                        <option value="ib">IB Score (out of 45)</option>
                        <option value="alevel">A-Level</option>
                        <option value="dse">Hong Kong DSE</option>
                        <option value="gaokao">Gaokao (China)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="gpaScore">Academic Score:</label>
                    <div class="help-text" id="gpaHelp">
                        <strong>4.0 Scale:</strong> Below 3.3(1) 3.3-3.5(2) 3.6-3.7(3) 3.8-3.9(4) 4.0(5) Above 4.0(6)
                    </div>
                    <div class="input-with-feedback">
                        <input type="number" id="gpaScore" placeholder="Your Academic Score" step="0.01" min="0" oninput="updateScoreBar(this, 'gpa')">
                        <div class="score-bar">
                            <div class="score-fill" id="gpaFill"></div>
                            <div class="score-indicator" id="gpaIndicator"></div>
                        </div>
                        <div class="current-level" id="gpaLevel"></div>
                    </div>
                </div>
            </div>

            <!-- Extracurriculars -->
            <div class="form-section">
                <div class="section-title">3. Extracurricular Activities <span class="optional">(All sections optional)</span></div>
                <div class="level-note">1-6: Normal student level, 6+: Exceptionally rare, determining factor for college consideration</div>
                <div class="help-text">
                    If no sections filled: score = 1 | If 2 sections same score: +1 bonus | If 3 sections same score: +2 bonus
                </div>
                
                <div class="extracurricular-grid">
                    <div class="input-group">
                        <label for="researchScore">Research & Publications:</label>
                        <div class="help-text">
                            <strong>Research Levels:</strong><br>
                            1: Interest essays, basic lab reports<br>
                            2: School research projects, science fair participation<br>
                            3: Published paper (non-peer reviewed), conference abstract<br>
                            4: Multiple papers, peer-reviewed publication in local journal<br>
                            5: Multiple peer-reviewed papers, co-author in recognized journal<br>
                            6: First author in SCI journal, h-index 2+<br>
                            7-10: Multiple SCI papers, h-index 3-5, significant citations<br>
                            11-20: Breakthrough research, Nature/Science publication, h-index 5+
                        </div>
                        <div class="input-with-feedback">
                            <input type="number" id="researchScore" placeholder="Research score (0-20)" min="0" max="20" oninput="updateScoreBar(this, 'research')">
                            <div class="score-bar">
                                <div class="score-fill" id="researchFill"></div>
                                <div class="score-indicator" id="researchIndicator"></div>
                            </div>
                            <div class="current-level" id="researchLevel"></div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="awardScore">Awards & Competitions:</label>
                        <div class="help-text">
                            <strong>Award Levels:</strong><br>
                            1: School awards, honor roll, participation certificates<br>
                            2: School-level competitive awards, merit recognition<br>
                            3: Regional competitions (top 10), city awards, local scholarships<br>
                            4: State competitions (top 5), regional scholarships, merit scholarships<br>
                            5: National competitions (top 10), state scholarships, prestigious awards<br>
                            6: International competitions, national scholarships, major fellowships<br>
                            7-10: Olympics medals, major international awards, prestigious fellowships<br>
                            11-20: World championship, Nobel/Fields Medal level recognition
                        </div>
                        <div class="input-with-feedback">
                            <input type="number" id="awardScore" placeholder="Award score (0-20)" min="0" max="20" oninput="updateScoreBar(this, 'award')">
                            <div class="score-bar">
                                <div class="score-fill" id="awardFill"></div>
                                <div class="score-indicator" id="awardIndicator"></div>
                            </div>
                            <div class="current-level" id="awardLevel"></div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="leadershipScore">Leadership & Business:</label>
                        <div class="help-text">
                            <strong>Leadership & Business Levels:</strong><br>
                            1: Club member, basic volunteer roles<br>
                            2: Club officer, committee member, team leader<br>
                            3: Club president, student council member, department head<br>
                            4: Student body president, multiple leadership roles, internship<br>
                            5: School-wide impact, founding president, startup founder<br>
                            6: Community leadership, major firm internship, profitable business<br>
                            7-10: Regional impact, successful startup (funding), fellowship recipient<br>
                            11-20: National impact, unicorn startup, Fortune 500 leadership, major business success
                        </div>
                        <div class="input-with-feedback">
                            <input type="number" id="leadershipScore" placeholder="Leadership score (0-20)" min="0" max="20" oninput="updateScoreBar(this, 'leadership')">
                            <div class="score-bar">
                                <div class="score-fill" id="leadershipFill"></div>
                                <div class="score-indicator" id="leadershipIndicator"></div>
                            </div>
                            <div class="current-level" id="leadershipLevel"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sports -->
            <div class="form-section">
                <div class="section-title">4. Sports & Athletics</div>
                <div class="level-note">1-6: Normal student level, 6+: Exceptionally rare, determining factor for college consideration</div>
                
                <div class="input-group">
                    <label for="sportsScore">Sports Achievement:</label>
                    <div class="help-text">
                        <strong>Sports Levels:</strong><br>
                        1: Recreational sports, intramural participation<br>
                        2: JV team member, regular training, basic competitions<br>
                        3: Varsity team member, consistent player, local competitions<br>
                        4: Varsity regular, team contributor, regional competitions<br>
                        5: Varsity captain, team MVP, regional winner, state qualifier<br>
                        6: State level competitor, recruited athlete, state winner<br>
                        7-10: Professional student athlete, national level, college recruitment<br>
                        11-20: Sports star, Olympic level, professional prospect, world champion
                    </div>
                    <div class="input-with-feedback">
                        <input type="number" id="sportsScore" placeholder="Sports score (0-20)" min="0" max="20" oninput="updateScoreBar(this, 'sports')">
                        <div class="score-bar">
                            <div class="score-fill" id="sportsFill"></div>
                            <div class="score-indicator" id="sportsIndicator"></div>
                        </div>
                        <div class="current-level" id="sportsLevel"></div>
                    </div>
                </div>
            </div>

            <!-- Social Activities -->
            <div class="form-section">
                <div class="section-title">5. Social Activities & Impact</div>
                <div class="level-note">1-6: Normal student level, 6+: Exceptionally rare, determining factor for college consideration</div>
                
                <div class="input-group">
                    <label for="socialScore">Social Impact & Service:</label>
                    <div class="help-text">
                        <strong>Social Impact Levels:</strong><br>
                        1: Basic volunteer work, community service hours<br>
                        2: Regular volunteering, local charity work, service projects<br>
                        3: Volunteer leadership, organizing events, community programs<br>
                        4: Community project leader, significant volunteer hours (500+)<br>
                        5: Founding social initiatives, measurable community impact<br>
                        6: Regional social influence, media recognition, major initiatives<br>
                        7-10: State/national social impact, policy influence, major organizations<br>
                        11-20: World-changing social impact, global influence, humanitarian recognition
                    </div>
                    <div class="input-with-feedback">
                        <input type="number" id="socialScore" placeholder="Social score (0-20)" min="0" max="20" oninput="updateScoreBar(this, 'social')">
                        <div class="score-bar">
                            <div class="score-fill" id="socialFill"></div>
                            <div class="score-indicator" id="socialIndicator"></div>
                        </div>
                        <div class="current-level" id="socialLevel"></div>
                    </div>
                </div>
            </div>

            <button type="submit" class="submit-btn">Generate Pentagon Analysis</button>
        </form>

        <div id="results" class="results">
            <h2 id="analysisTitle">Student's Pentagon Analysis Graph</h2>
            <div class="pentagon-container">
                <canvas id="pentagonCanvas" width="500" height="500"></canvas>
            </div>
            <div class="legend" id="legend"></div>
            <div class="rating" id="rating">Rating: 0.00%</div>
            <div class="stats-summary" id="statsSummary"></div>
        </div>
    </div>

    <script>
        // Score bar update function with proper color progression
        function updateScoreBar(input, type) {
            const value = parseFloat(input.value) || 0;
            const indicator = document.getElementById(type + 'Indicator');
            const fill = document.getElementById(type + 'Fill');
            const levelDisplay = document.getElementById(type + 'Level');
            
            // Calculate percentage for indicator position (0-100%)
            let percentage = Math.min((value / 20) * 100, 100);
            indicator.style.left = percentage + '%';
            fill.style.width = percentage + '%';
            
            // Color progression based on score ranges
            let color;
            if (value === 0) {
                color = 'transparent';
                fill.style.width = '0%';
            } else if (value >= 1 && value < 2) {
                color = '#ff4444'; // Red
            } else if (value >= 2 && value < 3) {
                color = '#ff8800'; // Orange
            } else if (value >= 3 && value < 4) {
                color = '#ffaa00'; // Yellow
            } else if (value >= 4 && value < 5) {
                color = '#44ff44'; // Green
            } else if (value >= 5 && value < 6) {
                color = '#4444ff'; // Blue
            } else if (value >= 6 && value <= 6.5) {
                color = '#aa44ff'; // Purple
            } else if (value > 6.5 && value <= 10) {
                // Gray progression (6.5-10)
                const grayIntensity = 0.2 + ((value - 6.5) / 3.5) * 0.6; // 0.2 to 0.8
                color = `rgba(${Math.round(grayIntensity * 255)}, ${Math.round(grayIntensity * 255)}, ${Math.round(grayIntensity * 255)}, 1)`;
            } else if (value > 10) {
                // White progression (10-20)
                const whiteIntensity = 0.8 + ((value - 10) / 10) * 0.2; // 0.8 to 1.0
                color = `rgba(${Math.round(whiteIntensity * 255)}, ${Math.round(whiteIntensity * 255)}, ${Math.round(whiteIntensity * 255)}, 1)`;
            }
            
            fill.style.backgroundColor = color;
            
            // Update level display
            let levelText = getLevelText(type, value);
            levelDisplay.textContent = levelText;
        }

        function getLevelText(type, value) {
            if (value === 0) return 'No score entered';
            
            const levels = {
                sat: {
                    0: 'Below 1200 (0)',
                    1: 'Below Average (1200-1349)',
                    2: 'Average (1350-1399)', 
                    3: 'Good (1400-1449)',
                    4: 'Very Good (1450-1499)',
                    5: 'Excellent (1500-1549)',
                    6: 'Outstanding (1550-1599)',
                    6.5: 'Perfect (1600)'
                },
                ap: {
                    0: 'No AP 5s',
                    1: '1 AP 5',
                    2: '2 AP 5s',
                    3: '3 AP 5s',
                    4: '4 AP 5s',
                    5: '5 AP 5s',
                    6: '10+ AP 5s',
                    7: '15+ AP 5s (Exceptional)',
                    10: '20+ AP 5s (Legendary)'
                },
                gpa: {
                    1: 'Below Average (< 3.3)',
                    2: 'Average (3.3-3.5)',
                    3: 'Good (3.6-3.7)', 
                    4: 'Very Good (3.8-3.9)',
                    5: 'Excellent (4.0)',
                    6: 'Outstanding (4.0+)'
                },
                research: {
                    1: 'Basic Interest (Essays)',
                    2: 'School Projects',
                    3: 'Published Work',
                    4: 'Peer-reviewed',
                    5: 'Multiple Publications',
                    6: 'SCI Journal (h-index 2+)',
                    10: 'Breakthrough Research',
                    15: 'Major Discovery',
                    20: 'World-class Research'
                },
                award: {
                    1: 'School Awards',
                    2: 'School Competition Winner',
                    3: 'Regional Awards',
                    4: 'State Level',
                    5: 'National Level',
                    6: 'International',
                    10: 'Olympic/World Level',
                    20: 'World Champion'
                },
                leadership: {
                    1: 'Club Member',
                    2: 'Club Officer',
                    3: 'President/Council',
                    4: 'Student Body Leader',
                    5: 'Founding President',
                    6: 'Community Leader',
                    10: 'Regional Impact/Successful Startup',
                    20: 'National Business Success'
                },
                sports: {
                    1: 'Recreational',
                    2: 'JV Team',
                    3: 'Varsity Member',
                    4: 'Regular Player',
                    5: 'Team Captain/MVP',
                    6: 'State Competitor',
                    10: 'Professional Student Athlete',
                    20: 'Sports Star/Olympic'
                },
                social: {
                    1: 'Basic Volunteer',
                    2: 'Regular Volunteer',
                    3: 'Volunteer Leader',
                    4: 'Project Leader (500+ hours)',
                    5: 'Social Initiative Founder',
                    6: 'Regional Influence',
                    10: 'National Impact',
                    20: 'World-changing Impact'
                }
            };
            
            const typelevels = levels[type] || {};
            let closestLevel = 1;
            
            for (let level in typelevels) {
                if (value >= parseFloat(level)) {
                    closestLevel = level;
                }
            }
            
            return typelevels[closestLevel] || 'Advanced Level';
        }

        // GPA type change handler with detailed descriptions
        document.getElementById('gpaType').addEventListener('change', function() {
            const gpaHelp = document.getElementById('gpaHelp');
            const type = this.value;
            
            const helpTexts = {
                'gpa4.0': '<strong>4.0 Scale:</strong> Below 3.3(1) | 3.3-3.5(2) | 3.6-3.7(3) | 3.8-3.9(4) | 4.0(5) | Above 4.0(6)',
                'gpa4.33': '<strong>4.33 Scale:</strong> Below 3.6(1) | 3.6-3.8(2) | 3.9-4.0(3) | 4.1-4.2(4) | 4.3(5) | Above 4.3(6)',
                'gpa5.0': '<strong>5.0 Scale:</strong> Below 4.0(1) | 4.0-4.2(2) | 4.3-4.5(3) | 4.6-4.8(4) | 4.9-5.0(5) | Above 5.0(6)',
                'gpa100': '<strong>Percentage:</strong> Below 80%(1) | 80-85%(2) | 86-90%(3) | 91-95%(4) | 96-99%(5) | 100%(6)',
                'ib': '<strong>IB Score:</strong> Below 28(1) | 28-32(2) | 33-36(3) | 37-40(4) | 41-44(5) | 45(6)',
                'alevel': '<strong>A-Level:</strong> Below BBB(1) | BBB-ABB(2) | AAB(3) | AAA(4) | AAA(5) | AAA(6)',
                'dse': '<strong>Hong Kong DSE:</strong> Below 4,4,4,4(1) | 4,4,4,4(2) | 5,5,5,5(3) | 5*,5*,5,5(4) | 5*,5*,5*,5*(5) | 5**,5**,5**,5**(6)',
                'gaokao': '<strong>Gaokao:</strong> Below 550(1) | 550-580(2) | 580-620(3) | 620-660(4) | 660-700(5) | 700+(6)'
                };
                gpaHelp.innerHTML = helpTexts[type] || helpTexts['gpa4.0'];
    });

    // Language test score conversion
    function getLanguageScore(type, score) {
        const conversions = {
            toefl: {
                ranges: [
                    { min: 0, max: 74, score: 0 },
                    { min: 75, max: 89, score: 1 },
                    { min: 90, max: 99, score: 2 },
                    { min: 100, max: 104, score: 3 },
                    { min: 105, max: 109, score: 4 },
                    { min: 110, max: 114, score: 5 },
                    { min: 115, max: 119, score: 6 },
                    { min: 120, max: 120, score: 6.5 }
                ]
            },
            ielts: {
                ranges: [
                    { min: 0, max: 5.0, score: 0 },
                    { min: 5.5, max: 6.0, score: 1 },
                    { min: 6.0, max: 6.5, score: 2 },
                    { min: 6.5, max: 7.0, score: 3 },
                    { min: 7.0, max: 7.5, score: 4 },
                    { min: 7.5, max: 8.0, score: 5 },
                    { min: 8.0, max: 8.5, score: 6 },
                    { min: 9.0, max: 9.0, score: 6.5 }
                ]
            },
            det: {
                ranges: [
                    { min: 0, max: 84, score: 0 },
                    { min: 85, max: 99, score: 1 },
                    { min: 100, max: 114, score: 2 },
                    { min: 115, max: 124, score: 3 },
                    { min: 125, max: 134, score: 4 },
                    { min: 135, max: 144, score: 5 },
                    { min: 145, max: 154, score: 6 },
                    { min: 155, max: 200, score: 6.5 }
                ]
            },
            'toefl-essentials': {
                ranges: [
                    { min: 0, max: 5, score: 0 },
                    { min: 6, max: 7, score: 1 },
                    { min: 7, max: 8, score: 2 },
                    { min: 8, max: 9, score: 3 },
                    { min: 9, max: 10, score: 4 },
                    { min: 10, max: 11, score: 5 },
                    { min: 11, max: 12, score: 6 },
                    { min: 12, max: 12, score: 6.5 }
                ]
            }
        };

        if (!conversions[type]) return 0;
        
        for (let range of conversions[type].ranges) {
            if (score >= range.min && score <= range.max) {
                return range.score;
            }
        }
        return 0;
    }

    // SAT score conversion
    function getSATScore(score) {
        if (score < 1200) return 0;
        if (score >= 1200 && score <= 1349) return 1;
        if (score >= 1350 && score <= 1399) return 2;
        if (score >= 1400 && score <= 1449) return 3;
        if (score >= 1450 && score <= 1499) return 4;
        if (score >= 1500 && score <= 1549) return 5;
        if (score >= 1550 && score <= 1599) return 6;
        if (score >= 1600) return 6.5;
        return 0;
    }

    // AP score conversion
    function getAPScore(numFives) {
        if (numFives === 0) return 0;
        if (numFives === 1) return 1;
        if (numFives === 2) return 2;
        if (numFives === 3) return 3;
        if (numFives === 4) return 4;
        if (numFives === 5) return 5;
        if (numFives >= 10 && numFives < 15) return 6;
        if (numFives >= 15 && numFives < 20) return 6.5;
        if (numFives >= 20) return 7;
        return Math.min(6, numFives);
    }

    // GPA score conversion
    function getGPAScore(type, score) {
        const conversions = {
            'gpa4.0': {
                ranges: [
                    { max: 3.29, score: 1 },
                    { max: 3.59, score: 2 },
                    { max: 3.79, score: 3 },
                    { max: 3.99, score: 4 },
                    { max: 4.0, score: 5 },
                    { max: 100, score: 6 }
                ]
            },
            'gpa4.33': {
                ranges: [
                    { max: 3.59, score: 1 },
                    { max: 3.89, score: 2 },
                    { max: 4.09, score: 3 },
                    { max: 4.29, score: 4 },
                    { max: 4.33, score: 5 },
                    { max: 100, score: 6 }
                ]
            },
            'gpa5.0': {
                ranges: [
                    { max: 3.99, score: 1 },
                    { max: 4.29, score: 2 },
                    { max: 4.59, score: 3 },
                    { max: 4.89, score: 4 },
                    { max: 5.0, score: 5 },
                    { max: 100, score: 6 }
                ]
            },
            'gpa100': {
                ranges: [
                    { max: 79, score: 1 },
                    { max: 85, score: 2 },
                    { max: 90, score: 3 },
                    { max: 95, score: 4 },
                    { max: 99, score: 5 },
                    { max: 100, score: 6 }
                ]
            },
            'ib': {
                ranges: [
                    { max: 27, score: 1 },
                    { max: 32, score: 2 },
                    { max: 36, score: 3 },
                    { max: 40, score: 4 },
                    { max: 44, score: 5 },
                    { max: 45, score: 6 }
                ]
            },
            'alevel': {
                ranges: [
                    { max: 2, score: 1 }, // Below BBB
                    { max: 3, score: 2 }, // BBB-ABB
                    { max: 4, score: 3 }, // AAB
                    { max: 5, score: 4 }, // AAA
                    { max: 6, score: 5 }, // A*AA
                    { max: 7, score: 6 }  // A*A*A*
                ]
            },
            'dse': {
                ranges: [
                    { max: 15, score: 1 },
                    { max: 16, score: 2 },
                    { max: 20, score: 3 },
                    { max: 22, score: 4 },
                    { max: 24, score: 5 },
                    { max: 28, score: 6 }
                ]
            },
            'gaokao': {
                ranges: [
                    { max: 549, score: 1 },
                    { max: 579, score: 2 },
                    { max: 619, score: 3 },
                    { max: 659, score: 4 },
                    { max: 699, score: 5 },
                    { max: 750, score: 6 }
                ]
            }
        };

        if (!conversions[type]) return 1;
        
        for (let range of conversions[type].ranges) {
            if (score <= range.max) {
                return range.score;
            }
        }
        return 6;
    }

    // Pentagon drawing function
    function drawPentagon(canvas, scores, studentName) {
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 180;
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Pentagon vertices (starting from top)
        const angles = [];
        for (let i = 0; i < 5; i++) {
            angles.push(-Math.PI / 2 + (i * 2 * Math.PI) / 5);
        }
        
        // Draw grid lines (1-6 levels)
        ctx.strokeStyle = '#ddd';
        ctx.lineWidth = 1;
        for (let level = 1; level <= 6; level++) {
            const levelRadius = (radius * level) / 6;
            ctx.beginPath();
            for (let i = 0; i < 5; i++) {
                const x = centerX + levelRadius * Math.cos(angles[i]);
                const y = centerY + levelRadius * Math.sin(angles[i]);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.stroke();
        }
        
        // Draw axis lines
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        for (let i = 0; i < 5; i++) {
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + radius * Math.cos(angles[i]),
                centerY + radius * Math.sin(angles[i])
            );
            ctx.stroke();
        }
        
        // Draw score polygon
        ctx.fillStyle = 'rgba(102, 126, 234, 0.3)';
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 3;
        
        ctx.beginPath();
        for (let i = 0; i < 5; i++) {
            const score = Math.min(scores[i], 6); // Cap at 6 for visualization
            const scoreRadius = (radius * score) / 6;
            const x = centerX + scoreRadius * Math.cos(angles[i]);
            const y = centerY + scoreRadius * Math.sin(angles[i]);
            
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        
        // Draw score points
        for (let i = 0; i < 5; i++) {
            const score = Math.min(scores[i], 6);
            const scoreRadius = (radius * score) / 6;
            const x = centerX + scoreRadius * Math.cos(angles[i]);
            const y = centerY + scoreRadius * Math.sin(angles[i]);
            
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.arc(x, y, 6, 0, 2 * Math.PI);
            ctx.fill();
            
            // Score text
            ctx.fillStyle = '#333';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(scores[i].toFixed(1), x, y - 12);
        }
        
        // Draw labels
        const labels = ['Test Scores', 'Academics', 'Extracurriculars', 'Sports', 'Social Impact'];
        ctx.fillStyle = '#333';
        ctx.font = 'bold 14px Arial';
        
        for (let i = 0; i < 5; i++) {
            const labelRadius = radius + 30;
            const x = centerX + labelRadius * Math.cos(angles[i]);
            const y = centerY + labelRadius * Math.sin(angles[i]);
            
            ctx.textAlign = 'center';
            ctx.fillText(labels[i], x, y + 4);
        }
        
        // Draw level indicators
        ctx.fillStyle = '#666';
        ctx.font = '12px Arial';
        for (let level = 1; level <= 6; level++) {
            const levelRadius = (radius * level) / 6;
            ctx.textAlign = 'center';
            ctx.fillText(level.toString(), centerX - levelRadius - 15, centerY + 4);
        }
    }

    // Form submission handler
    document.getElementById('scoringForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const studentName = document.getElementById('studentName').value || 'Student';
        
        // Calculate scores
        const scores = [];
        
        // 1. Test Scores (Academic)
        let testScore = 0;
        const languageTestType = document.getElementById('languageTestType').value;
        const languageScore = parseFloat(document.getElementById('languageScore').value) || 0;
        const satScore = parseFloat(document.getElementById('satScore').value) || 0;
        
        if (languageTestType && languageScore > 0) {
            testScore = Math.max(testScore, getLanguageScore(languageTestType, languageScore));
        }
        if (satScore > 0) {
            testScore = Math.max(testScore, getSATScore(satScore));
        }
        if (testScore === 0) testScore = 1; // Default if no test scores
        
        scores.push(testScore);
        
        // 2. Academic Performance
        const gpaType = document.getElementById('gpaType').value;
        const gpaScore = parseFloat(document.getElementById('gpaScore').value) || 0;
        const apScore = parseFloat(document.getElementById('apScore').value) || 0;
        
        let academicScore = 0;
        if (gpaScore > 0) {
            academicScore = Math.max(academicScore, getGPAScore(gpaType, gpaScore));
        }
        if (apScore > 0) {
            academicScore = Math.max(academicScore, getAPScore(apScore));
        }
        if (academicScore === 0) academicScore = 1; // Default
        
        scores.push(academicScore);
        
        // 3. Extracurriculars
        const researchScore = parseFloat(document.getElementById('researchScore').value) || 0;
        const awardScore = parseFloat(document.getElementById('awardScore').value) || 0;
        const leadershipScore = parseFloat(document.getElementById('leadershipScore').value) || 0;
        
        let extracurricularScore = 1; // Default
        const ecScores = [researchScore, awardScore, leadershipScore].filter(s => s > 0);
        
        if (ecScores.length > 0) {
            extracurricularScore = Math.max(...ecScores);
            
            // Bonus calculation
            const uniqueScores = [...new Set(ecScores)];
            if (ecScores.length >= 2 && uniqueScores.length === 1) {
                extracurricularScore += 1; // Same score bonus
            }
            if (ecScores.length === 3 && uniqueScores.length === 1) {
                extracurricularScore += 1; // Additional bonus for all three same
            }
        }
        
        scores.push(extracurricularScore);
        
        // 4. Sports
        const sportsScore = parseFloat(document.getElementById('sportsScore').value) || 1;
        scores.push(sportsScore);
        
        // 5. Social Activities
        const socialScore = parseFloat(document.getElementById('socialScore').value) || 1;
        scores.push(socialScore);
        
        // Calculate overall rating
        const totalScore = scores.reduce((a, b) => a + b, 0);
        const maxScore = 5 * 6; // 5 categories Ã— 6 max score
        const rating = (totalScore / maxScore) * 100;
        
        // Display results
        document.getElementById('analysisTitle').textContent = `${studentName}'s Pentagon Analysis Graph`;
        document.getElementById('rating').innerHTML = `Overall Rating: <span style="color: #667eea">${rating.toFixed(1)}%</span>`;
        
        // Draw pentagon
        const canvas = document.getElementById('pentagonCanvas');
        drawPentagon(canvas, scores, studentName);
        
        // Create legend
        const legend = document.getElementById('legend');
        const categories = ['Test Scores', 'Academics', 'Extracurriculars', 'Sports', 'Social Impact'];
        legend.innerHTML = categories.map((cat, i) => 
            `<div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(45deg, #667eea, #764ba2)"></div>
                <span>${cat}: ${scores[i].toFixed(1)}</span>
            </div>`
        ).join('');
        
        // Create detailed stats
        const statsSummary = document.getElementById('statsSummary');
        const stats = [
            { title: 'Standardized Testing', value: `${scores[0].toFixed(1)}/6`, detail: getScoreDetail(0, scores[0]) },
            { title: 'Academic Performance', value: `${scores[1].toFixed(1)}/6`, detail: getScoreDetail(1, scores[1]) },
            { title: 'Extracurricular Activities', value: `${scores[2].toFixed(1)}/6`, detail: getScoreDetail(2, scores[2]) },
            { title: 'Sports & Athletics', value: `${scores[3].toFixed(1)}/6`, detail: getScoreDetail(3, scores[3]) },
            { title: 'Social Impact & Service', value: `${scores[4].toFixed(1)}/6`, detail: getScoreDetail(4, scores[4]) }
        ];
        
        statsSummary.innerHTML = stats.map(stat => 
            `<div class="stat-card">
                <div class="stat-title">${stat.title}</div>
                <div class="stat-value">${stat.value}</div>
                <div style="font-size: 0.9em; color: #666; margin-top: 5px;">${stat.detail}</div>
            </div>`
        ).join('');
        
        document.getElementById('results').style.display = 'block';
        document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    });
    
    function getScoreDetail(category, score) {
        const details = [
            ['Needs Improvement', 'Below Average', 'Average', 'Good', 'Very Good', 'Excellent', 'Outstanding'],
            ['Needs Improvement', 'Below Average', 'Average', 'Good', 'Very Good', 'Excellent', 'Outstanding'],
            ['Basic Level', 'Developing', 'Active', 'Leadership Role', 'Significant Impact', 'Exceptional', 'World-class'],
            ['Recreational', 'Participant', 'Team Member', 'Regular Player', 'Team Leader', 'Competitive', 'Elite Level'],
            ['Basic Service', 'Regular Volunteer', 'Active Leader', 'Project Leader', 'Initiative Founder', 'Regional Impact', 'National Impact']
        ];
        
        const index = Math.min(Math.floor(score), 6);
        return details[category][index] || 'Exceptional Level';
    }
    
    // Initialize score bars for all inputs
    document.addEventListener('DOMContentLoaded', function() {
        const scoreInputs = ['satScore', 'apScore', 'gpaScore', 'researchScore', 'awardScore', 'leadershipScore', 'sportsScore', 'socialScore'];
        scoreInputs.forEach(id => {
            const input = document.getElementById(id);
            if (input) {
                updateScoreBar(input, id.replace('Score', ''));
            }
        });
    });
</script>
</body>
</html>